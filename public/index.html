<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Space Sonar .io</title>
  <link rel="stylesheet" href="/styles.css" />
  <link rel="preconnect" href="https://cdn.socket.io" crossorigin />
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js" defer></script>
  <script src="/game.js" type="module" defer></script>
  <meta name="color-scheme" content="dark light" />
  <meta name="description" content="KaranlÄ±k uzayda sonar ile rakipleri tespit et!" />
  <link rel="icon" href="data:," />
  <style>html,body{background:#000}</style>
  <meta http-equiv="Permissions-Policy" content="interest-cohort=()" />
</head>
<body>
  <div class="loading-overlay hidden" id="loading-overlay">
    <div class="loading-card">
      <div class="loading-spinner"></div>
      <div class="loading-message" id="loading-message">YÃ¼kleniyor...</div>
      <div class="loading-progress">
        <div class="loading-progress-bar" id="loading-progress-bar"></div>
      </div>
      <div class="loading-subtext" id="loading-subtext"></div>
    </div>
  </div>
  <!-- Main Menu -->
  <div id="main-menu" class="main-menu">
    <div class="menu-stars"></div>
    <div class="menu-content">
      <div class="menu-header">
        <h1 class="menu-title">
          <span class="title-word">SPACE</span>
          <span class="title-word">SONAR</span>
          <span class="title-glow">.io</span>
        </h1>
        <p class="menu-subtitle">KaranlÄ±k Uzayda Hayatta Kal</p>
      </div>

      <div class="menu-grid">
        <div class="menu-column primary">
          <div class="menu-auth">
            <div class="auth-card" id="login-card">
              <div class="auth-header">
                <div class="auth-title">GiriÅŸ Yap</div>
                <div class="auth-subtitle">Pilot hesabÄ±nla Ã¼sse baÄŸlan</div>
              </div>
              <div class="auth-fields">
                <input type="text" id="login-username" class="auth-input" placeholder="KullanÄ±cÄ± AdÄ±" maxlength="15" autocomplete="username" />
                <input type="password" id="login-password" class="auth-input" placeholder="Åifre" maxlength="20" autocomplete="current-password" />
              </div>
              <button class="auth-btn primary" id="login-submit">GiriÅŸ Yap</button>
              <div class="auth-note" id="ranked-requirement">Ranked maÃ§ aÃ§mak iÃ§in Ã¶nce 5 normal maÃ§ tamamla.</div>
              <div class="account-status" id="account-status"></div>
              <button class="auth-btn ghost" id="open-register">HesabÄ±n yok mu? KayÄ±t Ol</button>
            </div>

            <div class="auth-card hidden" id="register-card">
              <div class="auth-header">
                <div class="auth-title">KayÄ±t Ol</div>
                <div class="auth-subtitle">Yeni bir pilot profili oluÅŸtur</div>
              </div>
              <div class="auth-fields">
                <input type="text" id="register-username" class="auth-input" placeholder="KullanÄ±cÄ± AdÄ±" maxlength="15" autocomplete="username" />
                <input type="password" id="register-password" class="auth-input" placeholder="Åifre" maxlength="20" autocomplete="new-password" />
                <input type="password" id="register-password-confirm" class="auth-input" placeholder="Åifreyi DoÄŸrula" maxlength="20" autocomplete="new-password" />
              </div>
              <div class="auth-actions">
                <button class="auth-btn ghost" id="register-cancel">VazgeÃ§</button>
                <button class="auth-btn primary" id="register-submit">KaydÄ± Tamamla</button>
              </div>
              <div class="account-status" id="register-status"></div>
            </div>

            <div class="auth-card hidden" id="profile-card">
              <div class="auth-header">
                <div class="auth-title">Pilot Paneli</div>
                <div class="auth-subtitle">HoÅŸ geldin, <span id="profile-username"></span></div>
              </div>
              <div class="auth-note" id="profile-ranked-note"></div>
              <button class="auth-btn ghost" id="logout-btn">Ã‡Ä±kÄ±ÅŸ Yap</button>
            </div>
          </div>

          <div class="menu-card menu-actions">
            <button class="menu-btn" onclick="showHelp()">ğŸ“– NasÄ±l OynanÄ±r</button>
            <button class="menu-btn" id="sound-toggle" onclick="toggleSound()">ğŸ”Š Ses: AÃ§Ä±k</button>
            <button class="menu-btn hidden" id="career-button">ğŸ“œ Kariyer</button>
          </div>
        </div>

        <div class="menu-column secondary">
          <div class="menu-card menu-play">
            <div class="menu-card-title">MaÃ§a KatÄ±l</div>
            <div class="menu-mode-buttons" id="play-buttons">
              <div class="queue-block" id="queue-normal-block">
                <div class="queue-header">
                  <span class="queue-label">ğŸŒŒ Normal MaÃ§</span>
                  <span class="queue-status" id="queue-status-normal">SÄ±rada 0 oyuncu</span>
                </div>
                <div class="queue-actions">
                  <button class="queue-btn primary" id="queue-normal-join">SÄ±raya Gir</button>
                  <button class="queue-btn ghost hidden" id="queue-normal-leave">SÄ±radan Ã‡Ä±k</button>
                </div>
              </div>

              <div class="queue-block ranked" id="queue-ranked-block">
                <div class="queue-header">
                  <span class="queue-label">ğŸš€ Ranked MaÃ§</span>
                  <span class="queue-status" id="queue-status-ranked">SÄ±rada 0 oyuncu</span>
                </div>
                <div class="queue-actions">
                  <button class="queue-btn primary" id="queue-ranked-join">SÄ±raya Gir</button>
                  <button class="queue-btn ghost hidden" id="queue-ranked-leave">SÄ±radan Ã‡Ä±k</button>
                </div>
              </div>

              <div class="queue-info" id="queue-info">GiriÅŸ yaptÄ±ktan sonra sÄ±raya girebilirsin.</div>
            </div>
          </div>

          <div class="menu-card menu-info">
            <div class="menu-card-title">Kontroller</div>
            <p class="menu-info-text">W/A/D: Hareket Â· Space/Mouse: AteÅŸ Â· F: Tam ekran Â· G: Torpido Â· H: FÃ¼ze</p>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <div class="career-overlay" id="career-overlay">
    <div class="career-card">
      <div class="career-card-header">
        <div class="career-card-title">ğŸ“œ Kariyer</div>
        <button class="career-close" id="career-close">âœ•</button>
      </div>
      <div class="career-progress" id="career-progress"></div>
      <div class="career-overview">
        <div class="career-stats-grid" id="career-stats-grid"></div>
        <div class="career-rank-panel">
          <div class="career-rank-badge" id="career-current-rank">-</div>
          <div class="career-rank-detail" id="career-rank-detail"></div>
        </div>
      </div>
      <div class="career-charts">
        <div class="career-chart" id="career-mode-chart">
          <div class="career-chart-title">MaÃ§ TÃ¼rÃ¼ DaÄŸÄ±lÄ±mÄ±</div>
          <canvas id="career-mode-canvas" width="220" height="220"></canvas>
          <div class="career-chart-legend" id="career-mode-legend"></div>
        </div>
        <div class="career-chart" id="career-rank-chart">
          <div class="career-chart-title">Rank PuanÄ± GeÃ§miÅŸi</div>
          <canvas id="career-rank-canvas" width="320" height="220"></canvas>
        </div>
      </div>
      <div class="career-summary" id="career-summary"></div>
      <div class="career-filters">
        <button class="career-filter" data-filter="all">TÃ¼mÃ¼</button>
        <button class="career-filter" data-filter="ranked">Ranked</button>
        <button class="career-filter" data-filter="normal">Normal</button>
      </div>
      <div class="career-list" id="career-list"></div>
      <div class="career-bottom">
        <div class="career-icon-legend" id="career-icon-legend"></div>
        <div class="career-history-footer" id="career-history-footer"></div>
      </div>
    </div>
  </div>

  <!-- Background Music -->
  <audio id="bg-music" loop>
    <source src="/music.mp3" type="audio/mpeg">
  </audio>
  
  <!-- Toast Container -->
  <div class="toast-container" id="toast-container"></div>
  
  <canvas id="game"></canvas>
  <div class="hud">
    <div class="title">Space Sonar .io</div>
    <div class="status"><span id="name"></span> Â· Ping: <span id="ping">-</span> ms Â· FPS: <span id="fps">-</span></div>
    <div class="help">W: Ä°leri Â· A/D veya SaÄŸ TÄ±k: DÃ¶n Â· Space/Sol TÄ±k: AteÅŸ Â· F: Tam Ekran Â· G: Torpido Â· H: FÃ¼ze Â· Tab: Skor Tablosu Â· M: Minimap</div>
  </div>
  
  <!-- Scoreboard Overlay -->
  <div class="scoreboard-overlay" id="scoreboard-overlay">
    <div class="scoreboard-body" id="scoreboard-body"></div>
    <div class="sb-icons" id="rank-icon-legend"></div>
  </div>

  <div class="ranked-leave-overlay hidden" id="ranked-leave-overlay">
    <div class="ranked-leave-card">
      <div class="ranked-leave-header">
        <div class="ranked-leave-title">âš ï¸ Ranked MaÃ§tan AyrÄ±l</div>
        <button class="ranked-leave-close" id="ranked-leave-close">âœ•</button>
      </div>
      <div class="ranked-leave-body">
        <p>MaÃ§tan ayrÄ±ldÄ±ÄŸÄ±nda <span class="ranked-leave-penalty" id="ranked-leave-penalty">-75 RP</span> cezasÄ± uygulanacak.</p>
        <div class="ranked-leave-warning">TakÄ±mÄ±nÄ± yalnÄ±z bÄ±rakmak rank puanÄ± dÃ¼ÅŸÃ¼rÃ¼r ve kariyerine yansÄ±r.</div>
        <div class="ranked-leave-note">Bu iÅŸlem geri alÄ±namaz. MaÃ§a dÃ¶nmek iÃ§in â€œOyuna Devam Etâ€ tuÅŸuna bas.</div>
      </div>
      <div class="ranked-leave-actions">
        <button class="ranked-leave-btn secondary" id="ranked-leave-cancel">Oyuna Devam Et</button>
        <button class="ranked-leave-btn danger" id="ranked-leave-confirm">Rank CezasÄ±nÄ± Kabul Et</button>
      </div>
    </div>
  </div>

  <div class="match-summary-overlay" id="match-summary-overlay">
    <div class="match-summary-card">
      <div class="match-summary-header">
        <div class="match-summary-title">ğŸ MaÃ§ Ã–zeti</div>
        <div class="match-summary-result" id="match-summary-result">MaÃ§ Bitti</div>
      </div>
      <div class="match-summary-body" id="match-summary-body"></div>
      <div class="match-summary-actions">
        <button class="summary-btn primary" id="match-summary-play-again">Yeni MaÃ§a BaÅŸla</button>
        <button class="summary-btn" id="match-summary-exit">Ana MenÃ¼ye DÃ¶n</button>
      </div>
    </div>
  </div>
 
  <!-- Kill Feed -->
  <div class="killfeed" id="killfeed"></div>
  
  <!-- Skills Panel -->
  <div class="skills-panel" id="skills-panel">
    <div class="skill-title draggable-handle">âš¡ YETENEKLER</div>
    <div class="skills-row">
      <div class="skill" id="skill-speed">
        <span class="skill-icon">ğŸš€</span>
        <div class="skill-info">
          <div class="skill-name">HÄ±z ArtÄ±ÅŸÄ±</div>
          <div class="skill-level" id="speed-level">Lv. 0/3</div>
        </div>
        <button class="skill-btn" onclick="upgradeSkill('speedBoost')">â†‘</button>
      </div>
      <div class="skill" id="skill-shield">
        <span class="skill-icon">ğŸ›¡ï¸</span>
        <div class="skill-info">
          <div class="skill-name">Kalkan</div>
          <div class="skill-level" id="shield-level">Lv. 0/3</div>
        </div>
        <button class="skill-btn" onclick="upgradeSkill('shield')">â†‘</button>
      </div>
      <div class="skill" id="skill-rapid">
        <span class="skill-icon">ğŸ”«</span>
        <div class="skill-info">
          <div class="skill-name">HÄ±zlÄ± AteÅŸ</div>
          <div class="skill-level" id="rapid-level">Lv. 0/3</div>
        </div>
        <button class="skill-btn" onclick="upgradeSkill('rapidFire')">â†‘</button>
      </div>
    </div>
  </div>
  
  <!-- Weapons Panel -->
  <div class="weapons-panel" id="weapons-panel">
    <div class="weapon-title draggable-handle">ğŸš€ SÄ°LAHLAR</div>
    <div class="weapons-row">
      <div class="upgrade-item">
        <span class="upgrade-icon">ğŸ”«</span>
        <div class="upgrade-info">
          <div class="upgrade-name">Top [Sol Click/Space]</div>
          <div class="upgrade-level" id="cannon-level">Lv. 1/3</div>
        </div>
        <button class="upgrade-btn" onclick="upgradeWeapon('cannon')">â†‘</button>
      </div>
      <div class="upgrade-item">
        <span class="upgrade-icon">ğŸ¯</span>
        <div class="upgrade-info">
          <div class="upgrade-name">Torpido [G]</div>
          <div class="upgrade-level" id="torpedo-level">Lv. 0/3 (150)</div>
        </div>
        <button class="upgrade-btn" onclick="upgradeWeapon('torpedo')">â†‘</button>
      </div>
      <div class="upgrade-item">
        <span class="upgrade-icon">ğŸš€</span>
        <div class="upgrade-info">
          <div class="upgrade-name">FÃ¼ze [H]</div>
          <div class="upgrade-level" id="missile-level">Lv. 0/3 (200)</div>
        </div>
        <button class="upgrade-btn" onclick="upgradeWeapon('missile')">â†‘</button>
      </div>
    </div>
  </div>
  
</body>
</html>
